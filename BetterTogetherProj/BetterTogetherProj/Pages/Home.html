<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.3/css/responsive.dataTables.min.css">

    <script src="../Scripts/jquery-3.4.1.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/responsive/2.2.3/js/dataTables.responsive.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="../Scripts/ajaxCalls.js"></script>

    <!--<script src="https://static.fusioncharts.com/code/latest/fusioncharts.js"></script>-->
    <link href="MyStyleSheet.css" rel="stylesheet" />

    <!--<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.6.2/firebase-database.js"></script>-->
    <!--<script src="../Scripts/config.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.2/firebase-firestore.js"></script>-->


    <script>

        //var statusQR = 1;

        //if (!firebase.apps.length) {
        //    firebase.initializeApp({
        //        apiKey: "AIzaSyCSHnFe2MHnBKhRHQrwACoNLo5cerY5W74",
        //        authDomain: "chat-firebase-6a710.firebaseapp.com",
        //        projectId: "chat-firebase-6a710",
        //    });
        //}
        //var db = firebase.firestore();

        $(document).ready(function () {

            //ajaxCall("GET", "../api/Questionnaire/getRespondersbyDepAndYear", "", getRespondersbyDepAndYear, error);

            //ajaxCall("GET","../api/students/getStudentbyDepAndYear", "", getStudentbyDepAndYear, error);

            ajaxCall("GET", "../api/students/getpercentregistered", "", getpercentregistered, error);
            ajaxCall("GET", "../api/Questionnaire/getpercentActiveQr", "", getpercentActiveQr, error);
            ajaxCall("GET", "../api/students/getpercentregiByDep", "", getpercentregiByDep, error);
            ajaxCall("GET", "../api/students/getpercentregiByYear", "", getpercentregiByYear, error);

        })

        function getpercentregistered(StuRatio) {
            console.log(StuRatio);
            Ratio = (StuRatio[0] / StuRatio[1])*100;
            Ratio=Math.round((Ratio + Number.EPSILON) * 100)/100 ;

            $("#ratioStu").append("<b>" + Ratio+"%"+"</b></br>"+"סטודנטים המשתמשים באפליקציה");
            $("#quantitystu").append("<b>"+ StuRatio[0]+"</b></br>"+" סטודנטים רשומים לאפליקציה ");


        }

        function getpercentActiveQr(Qrratio) {
            console.log(Qrratio);
            Ratio = (Qrratio[0] / Qrratio[1]) * 100;
            Ratio = Math.round((Ratio + Number.EPSILON) * 100) / 100;

            $("#ratioQr").append("<b>"+ Ratio+"%"+"</b></br>" +"שאלונים פעילים בחודש האחרון " );
            $("#quantityQr").append("<b>"+ Qrratio[1]+"</b></br>"+"כמות השאלונים שפורסמו עד כה");
        }

        function getpercentregiByDep(StuRatioDep) {
            console.log(StuRatioDep);
           


        }

        function getpercentregiByYear(StuRatioYear) {
            console.log(StuRatioYear);


        }
        //function getRespondersbyDepAndYear(ResData) {
        //    console.log(ResData)
        //}

        //function getStudentbyDepAndYear(StuData) {
        //    console.log(StuData)

        //}
        //function getSuccess(Qr) {
        //    console.log(Qr)
        //    db.collection("QrResponPercent").add({
        //        "Qauntity": 2
        //    })
        //        .then((docRef) => {
        //            console.log("Document written with ID: ", docRef.id);
        //        })
        //        .catch((error) => {
        //            console.error("Error adding document: ", error);
        //        });



        //        var firebaseChart = new FusionCharts({
        //            type: 'area2d',
        //            renderAt: 'chart-container',
        //            width: '650',
        //            height: '400',
        //            dataFormat: 'json',
        //            dataSource: {
        //                "chart": {
        //                    "caption": "Website Visitors Trend",
        //                    "subCaption": "Last 7 Days{br}ACME Inc.",
        //                    "subCaptionFontBold": "0",
        //                    "captionFontSize": "20",
        //                    "subCaptionFontSize": "17",
        //                    "captionPadding": "15",
        //                    "captionFontColor": "#8C8C8C",
        //                    "baseFontSize": "14",
        //                    "baseFont": "Barlow",
        //                    "canvasBgAlpha": "0",
        //                    "bgColor": "#FFFFFF",
        //                    "bgAlpha": "100",
        //                    "showBorder": "0",
        //                    "showCanvasBorder": "0",
        //                    "showPlotBorder": "0",
        //                    "showAlternateHGridColor": "0",
        //                    "usePlotGradientColor": "0",
        //                    "paletteColors": "#6AC1A5",
        //                    "showValues": "0",
        //                    "divLineAlpha": "5",
        //                    "showAxisLines": "1",
        //                    "drawAnchors": "0",
        //                    "xAxisLineColor": "#8C8C8C",
        //                    "xAxisLineThickness": "0.7",
        //                    "xAxisLineAlpha": "50",
        //                    "yAxisLineColor": "#8C8C8C",
        //                    "yAxisLineThickness": "0.7",
        //                    "yAxisLineAlpha": "50",
        //                    "baseFontColor": "#8C8C8C",
        //                    "toolTipBgColor": "#FA8D67",
        //                    "toolTipPadding": "10",
        //                    "toolTipColor": "#FFFFFF",
        //                    "toolTipBorderRadius": "3",
        //                    "toolTipBorderAlpha": "0",
        //                    "drawCrossLine": "1",
        //                    "crossLineColor": "#8C8C8C",
        //                    "crossLineAlpha": "60",
        //                    "crossLineThickness": "0.7",
        //                    "alignCaptionWithCanvas": "1"
        //                },
        //                "data": Qr.length
        //            }
        //        });

        //        firebaseChart.render();
        //}

        function error(err) {
            console.log(err)
        }

    </script>
</head>
<body>
    <!--<div id="chart-container"><svg width="90px" height="90px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" class="lds-rolling" style="background: none;"><circle cx="50" cy="50" fill="none" ng-attr-stroke="{{config.color}}" ng-attr-stroke-width="{{config.width}}" ng-attr-r="{{config.radius}}" ng-attr-stroke-dasharray="{{config.dasharray}}" stroke="#6ac1a5" stroke-width="9" r="33" stroke-dasharray="155.50883635269477 53.83627878423159" transform="rotate(324 50 50)"><animateTransform attributeName="transform" type="rotate" calcMode="linear" values="0 50 50;360 50 50" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite"></animateTransform></circle></svg></div>-->

    <div class="flip-card " id="student">

        <div class="flip-card-inner">
            <div class="flip-card-front">


                <h2 id="ratioStu"></h2>
            </div>
            <div class="flip-card-back">
                <h2 id="quantitystu"></h2>

            </div>
        </div>
    </div>

    <div class="flip-card" id="qr">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <h2 id="ratioQr"></h2>
            </div>
            <div class="flip-card-back">
                <h2 id="quantityQr"></h2>

                r"

            </div>
        </div>
        </
        di
    </div>


    <div class="flip-card" id="qr">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <h2 id="ratioDep"></h2>
            </div>
            <div class="flip-card-back">
                <h2 id="quantityDep"></h2>

            </div>
        </div>
    </div>

    <div class="flip-card" id="qr">
        <div class="flip-card-inner">
            <div class="flip-card-front">
                <h2 id="ratioYear"></h2>
            </div>
            <div class="flip-card-back">
                <h2 id="quantityYear"></h2>

            </div>
        </div>
    </div>
</body>
</html>